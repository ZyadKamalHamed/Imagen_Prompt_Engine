<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Professional Google Nano-Banana prompt generator for AI image generation and editing">
    <meta name="keywords" content="Nano-Banana, Google AI, prompt engineering, image generation, AI art">
    <title>Nano Banana - Professional Nano-Banana Prompt Generator</title>
    
    <!-- External Stylesheets - ADD THESE LINKS -->
    <link rel="stylesheet" href="css/shared.css">
    <link rel="stylesheet" href="css/nano-banana.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üçå</div>
            <h1>NANO BANANA</h1>
            <p class="subtitle">Professional Nano-Banana Prompt Generator</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-line">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-step active" id="step1">
                    <div class="step-number">1</div>
                    <div class="step-label">Generation Type</div>
                </div>
                <div class="progress-step" id="step2">
                    <div class="step-number">2</div>
                    <div class="step-label">Template Selection</div>
                </div>
                <div class="progress-step" id="step3">
                    <div class="step-number">3</div>
                    <div class="step-label">Prompt Generation</div>
                </div>
            </div>
        </div>

        <!-- Page 1: Choose Generation Type -->
        <div class="page active" id="page1">
            <h2 class="page-title">Choose Generation Type</h2>
            <p class="page-subtitle">Select your preferred approach to image creation with Google's Nano-Banana</p>
            
            <div class="category-selection">
                <div class="category-card" onclick="selectCategory('text-to-image')">
                    <div class="category-icon">üé®</div>
                    <div class="category-title">Text-to-Image Generation</div>
                    <p class="category-description">Create high-quality images from detailed text descriptions using Nano-Banana's advanced generation capabilities. Perfect for original artwork, photography, and creative projects.</p>
                </div>
                
                <div class="category-card" onclick="selectCategory('editing')">
                    <div class="category-icon">‚úèÔ∏è</div>
                    <div class="category-title">Image Editing & Transformation</div>
                    <p class="category-description">Transform and modify existing images using Gemini's multimodal editing features. Ideal for style transfer, object modification, and creative enhancement.</p>
                </div>
            </div>
        </div>

        <!-- Page 2a: Text-to-Image Templates -->
        <div class="page" id="page2a">
            <button class="btn back-btn" onclick="goBack()">‚Üê Back to Generation Types</button>
            <h2 class="page-title">Text-to-Image Templates</h2>
            <p class="page-subtitle">Choose a specialized template optimized for your specific creative needs</p>
            
            <div class="subcategory-grid">
                <div class="subcategory-card" onclick="selectTemplate('photography')">
                    <div class="subcategory-title">üì∑ Professional Photography</div>
                    <div class="category-photo">
                        <img src="Images/Image_Gen.png" alt="Text-to-image preview" />
                    </div>
                    <p class="subcategory-description">Generate photorealistic images with precise camera controls, lighting setups, and professional photography techniques.</p>
                    <div class="example-prompt">
                        <strong>Example Output:</strong><br>
                        "A photorealistic close-up portrait of an elderly Japanese ceramicist with deep, sun-etched wrinkles and a warm, knowing smile. He is carefully inspecting a freshly glazed tea bowl. The setting is his rustic, sun-drenched workshop. The scene is illuminated by soft, golden hour light streaming through a window, highlighting the fine texture of the clay. Captured with an 85mm portrait lens, resulting in a soft, blurred background (bokeh). The overall mood is serene and masterful. Vertical portrait orientation."
                    </div>
                </div>

                <div class="subcategory-card" onclick="selectTemplate('illustration')">
                    <div class="subcategory-title">üé≠ Illustration & Stickers</div>
                    <div class="category-photo">
                        <img src="Images/Sticker.png" alt="Sticker design preview" />
                    </div>
                    <p class="subcategory-description">Create artistic illustrations, digital art, and sticker designs with specific art styles and aesthetic approaches.</p>
                    <div class="example-prompt">
                        <strong>Example Output:</strong><br>
                        "A kawaii-style sticker of a happy red panda wearing a tiny bamboo hat. It's munching on a green bamboo leaf. The design features bold, clean outlines, simple cel-shading, and a vibrant color palette. The background must be white."
                    </div>
                </div>

                <div class="subcategory-card" onclick="selectTemplate('product')">
                    <div class="subcategory-title">üì¶ Product Mockup & Commercial Photography</div>
                    <div class="category-photo">
                        <img src="Images/Product_Mockups.png" alt="Product photography preview" />
                    </div>
                    <p class="subcategory-description">Professional product photography with studio lighting, mockup creation, and commercial presentation standards.</p>
                    <div class="example-prompt">
                        <strong>Example Output:</strong><br>
                        "A high-resolution, studio-lit product photograph of a minimalist ceramic coffee mug in matte black, presented on a polished concrete surface. The lighting is a three-point softbox setup designed to create soft, diffused highlights and eliminate harsh shadows. The camera angle is a slightly elevated 45-degree shot to showcase its clean lines. Ultra-realistic, with sharp focus on the steam rising from the coffee. Square image."
                    </div>
                </div>

                <div class="subcategory-card" onclick="selectTemplate('text-image')">
                    <div class="subcategory-title">üìù Text Integration</div>
                    <div class="category-photo">
                        <img src="Images/Text_in_images.png" alt="Text in images preview" />
                    </div>
                    <p class="subcategory-description">Generate images with accurate text rendering for logos, signage, and typography-focused designs (optimized for 25 character limit).</p>
                    <div class="example-prompt">
                        <strong>Example Output:</strong><br>
                        "Create a modern, minimalist logo for a coffee shop called 'The Daily Grind'. The text should be in a clean, bold, sans-serif font. The design should feature a simple, stylized icon of a coffee bean seamlessly integrated with the text. The color scheme is black and white."
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 2b: Image Editing Templates -->
        <div class="page" id="page2b">
            <button class="btn back-btn" onclick="goBack()">‚Üê Back to Generation Types</button>
            <h2 class="page-title">Image Editing Templates</h2>
            <p class="page-subtitle">Transform existing images with AI-powered editing and enhancement</p>
            
            <div class="subcategory-grid">
                <div class="subcategory-card" onclick="selectTemplate('image-editing')">
                    <div class="subcategory-title">üîß Precise Image Modification</div>
                    <div class="category-photo">
                        <img src="Images/Combinig_Multiple_Images.png" alt="Image editing preview" />
                    </div>
                    <p class="subcategory-description">Add, remove, or modify specific elements in existing images while maintaining natural integration and lighting consistency.</p>
                    <div class="example-prompt">
                        <strong>Example Output:</strong><br>
                        "Create a professional e-commerce fashion photo. Take the blue floral dress from the first image and let the woman from the second image wear it. Generate a realistic, full-body shot of the woman wearing the dress, with the lighting and shadows adjusted to match the outdoor environment."
                    </div>
                </div>

                <div class="subcategory-card" onclick="selectTemplate('style-transfer')">
                    <div class="subcategory-title">üé® Artistic Style Transfer</div>
                    <div class="category-photo">
                        <img src="Images/Style_Transfer.png" alt="Style transfer preview" />
                    </div>
                    <p class="subcategory-description">Transform photographs into specific artistic styles while preserving the original composition and subject matter.</p>
                    <div class="example-prompt">
                        <strong>Example Output:</strong><br>
                        "Transform the provided photograph of a modern city street at night into the artistic style of Vincent van Gogh's 'Starry Night'. Preserve the original composition of buildings and cars, but render all elements with swirling, impasto brushstrokes and a dramatic palette of deep blues and bright yellows."
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 3: Template Form (dynamically populated) -->
        <div class="page" id="page3">
            <button class="btn back-btn" onclick="goBackToTemplates()">‚Üê Back to Templates</button>
            <div id="templateContent"></div>
        </div>
    </div>

    <script>
        // ALL JAVASCRIPT GOES HERE - KEEP IN HTML FILE
        let currentStep = 1;
        let selectedCategory = '';
        let selectedTemplate = '';

        const templates = {
            photography: {
                title: "üì∑ Professional Photography Template",
                description: "Generate photorealistic images with professional camera techniques and lighting control",
                fields: [
                    { name: 'subject', label: 'Primary Subject', type: 'textarea', hint: 'Detailed description of the main subject including age, appearance, clothing, expressions, poses', examples: 'Examples: "A confident 30-year-old woman in business attire" ‚Ä¢ "Vintage leather motorcycle jacket on wooden table"' },
                    { name: 'shotType', label: 'Shot Composition', type: 'select', options: ['extreme close-up', 'close-up', 'medium close-up', 'medium shot', 'wide shot', 'overhead shot', 'low angle', 'high angle'], hint: 'Camera distance and angle relative to subject' },
                    { name: 'lens', label: 'Lens & Camera Settings', type: 'select', options: ['14mm ultra-wide', '24mm wide-angle', '35mm standard', '50mm portrait', '85mm portrait', '135mm telephoto', 'macro lens', 'fisheye lens'], hint: 'Lens focal length affects perspective and depth' },
                    { name: 'lighting', label: 'Lighting Setup', type: 'select', options: ['natural daylight', 'golden hour', 'blue hour', 'studio softbox', 'ring light', 'dramatic side lighting', 'backlit silhouette', 'rim lighting'], hint: 'Light source type, direction, and quality' },
                    { name: 'setting', label: 'Environment & Background', type: 'text', hint: 'Detailed location description', examples: 'Examples: "Minimalist white studio" ‚Ä¢ "Bustling Tokyo street at night"' },
                    { name: 'mood', label: 'Mood & Atmosphere', type: 'text', hint: 'Emotional tone and feeling', examples: 'Examples: "Serene and contemplative" ‚Ä¢ "Dynamic and energetic"' },
                    { name: 'cameraDetails', label: 'Technical Camera Details', type: 'text', hint: 'Camera model, depth of field details', examples: 'Examples: "Canon 5D Mark IV, shallow depth of field"' },
                    { name: 'aspectRatio', label: 'Aspect Ratio', type: 'select', options: ['1:1', '4:3', '3:4', '16:9', '9:16', '3:2', '2:3'], hint: 'Image dimensions and orientation' }
                ],
                template: "A {shotType} photo of {subject}, {lens} lens, {lighting}, set in {setting}, creating a {mood} atmosphere. Captured with {cameraDetails}, {aspectRatio} aspect ratio, professional photography"
            },
            illustration: {
                title: "üé≠ Illustration & Stickers Template",
                description: "Create artistic illustrations, digital art, and sticker designs",
                fields: [
                    { name: 'artStyle', label: 'Art Style & Medium', type: 'select', options: ['kawaii cute style', 'minimalist vector', 'detailed digital painting', 'watercolor illustration', 'flat design', 'hand-drawn sketch', 'anime/manga style', 'vintage poster art'], hint: 'Primary artistic approach' },
                    { name: 'subject', label: 'Main Subject', type: 'textarea', hint: 'Character or object to illustrate', examples: 'Examples: "Friendly robot chef wearing apron"' },
                    { name: 'colorPalette', label: 'Color Palette', type: 'text', hint: 'Primary colors', examples: 'Examples: "Pastel pink and mint green"' },
                    { name: 'composition', label: 'Composition & Layout', type: 'text', hint: 'Arrangement of elements', examples: 'Examples: "Centered with symmetrical balance"' },
                    { name: 'details', label: 'Style Details', type: 'text', hint: 'Line weight, texture, patterns', examples: 'Examples: "Thick black outlines with cel shading"' },
                    { name: 'purpose', label: 'Usage Purpose', type: 'select', options: ['digital sticker', 'logo design', 'poster art', 'character design', 'book illustration', 'app icon'], hint: 'Intended use' },
                    { name: 'background', label: 'Background Treatment', type: 'select', options: ['transparent background', 'solid color', 'gradient background', 'detailed scene', 'abstract pattern'], hint: 'Background style' }
                ],
                template: "A {artStyle} illustration of {subject}, {colorPalette} color palette, {composition} composition, featuring {details}, designed as {purpose} with {background}"
            },
            product: {
                title: "üì¶ Product Mockup & Commercial Photography Template",
                description: "Professional product photography with studio lighting",
                fields: [
                    { name: 'product', label: 'Product Description', type: 'textarea', hint: 'Detailed product description', examples: 'Examples: "Sleek titanium smartwatch with black leather band"' },
                    { name: 'backgroundSetup', label: 'Background & Surface', type: 'select', options: ['seamless white background', 'seamless black background', 'gradient backdrop', 'marble surface', 'wooden table', 'fabric texture'], hint: 'Surface setup' },
                    { name: 'lightingSetup', label: 'Professional Lighting', type: 'select', options: ['three-point studio lighting', 'softbox key light', 'ring light setup', 'dramatic side lighting', 'natural window light'], hint: 'Lighting configuration' },
                    { name: 'cameraAngle', label: 'Product Angle', type: 'select', options: ['straight-on hero shot', '45-degree angle', 'overhead flat lay', 'low angle dramatic', 'three-quarter view'], hint: 'Viewing angle' },
                    { name: 'focusStyle', label: 'Focus & Depth', type: 'select', options: ['tack sharp focus', 'shallow depth of field', 'macro detail focus', 'bokeh background'], hint: 'Depth of field' },
                    { name: 'styling', label: 'Styling & Props', type: 'text', hint: 'Additional elements', examples: 'Examples: "Minimalist with single shadow"' },
                    { name: 'quality', label: 'Image Quality', type: 'select', options: ['4K ultra-high resolution', 'commercial photography quality', 'e-commerce optimized'], hint: 'Quality level' },
                    { name: 'aspectRatio', label: 'Aspect Ratio', type: 'select', options: ['1:1', '4:3', '3:4', '16:9'], hint: 'Image dimensions' }
                ],
                template: "A professional product photograph of {product}, {backgroundSetup}, {lightingSetup}, {cameraAngle}, {focusStyle}, {styling}, {quality}, {aspectRatio} aspect ratio"
            },
            'text-image': {
                title: "üìù Text Integration Template",
                description: "Generate images with accurate text rendering (25 character max)",
                fields: [
                    { name: 'text', label: 'Text Content', type: 'text', hint: 'Maximum 25 characters', maxLength: 25, examples: 'Examples: "NANO AI" ‚Ä¢ "Coffee Shop"' },
                    { name: 'textStyle', label: 'Typography Style', type: 'select', options: ['bold modern sans-serif', 'elegant serif font', 'handwritten script', 'geometric display font', 'vintage retro lettering', 'minimalist thin font'], hint: 'Font style' },
                    { name: 'designType', label: 'Design Application', type: 'select', options: ['logo design', 'poster title', 'storefront sign', 'business card', 'social media banner', 'product label'], hint: 'Intended use' },
                    { name: 'colorScheme', label: 'Color Treatment', type: 'text', hint: 'Text and background colors', examples: 'Examples: "White text on deep blue gradient"' },
                    { name: 'backgroundStyle', label: 'Background Design', type: 'text', hint: 'Background elements', examples: 'Examples: "Clean minimalist white"' },
                    { name: 'visualEffects', label: 'Visual Effects', type: 'text', hint: 'Effects applied to text', examples: 'Examples: "Subtle drop shadow" ‚Ä¢ "Neon glow effect"' },
                    { name: 'brandStyle', label: 'Brand Personality', type: 'text', hint: 'Overall aesthetic', examples: 'Examples: "Professional and trustworthy"' }
                ],
                template: 'A {designType} featuring the text "{text}" in {textStyle}, {colorScheme} color scheme, {backgroundStyle} background, {visualEffects}, conveying {brandStyle} aesthetic'
            },
            'image-editing': {
                title: "üîß Precise Image Modification Template",
                description: "Edit existing images with text-guided modifications",
                fields: [
                    { name: 'action', label: 'Editing Action', type: 'select', options: ['add new element', 'remove existing element', 'replace element', 'modify existing element', 'change colors/materials', 'adjust lighting'], hint: 'Type of modification' },
                    { name: 'targetElement', label: 'Target Element', type: 'text', hint: 'What to modify', examples: 'Examples: "The red car in the parking lot"' },
                    { name: 'newElement', label: 'New Element/Change', type: 'textarea', hint: 'What to add or change', examples: 'Examples: "Modern stainless steel refrigerator"' },
                    { name: 'integration', label: 'Integration Style', type: 'text', hint: 'How to blend', examples: 'Examples: "Seamlessly matching existing lighting"' },
                    { name: 'preservation', label: 'Elements to Preserve', type: 'textarea', hint: 'What must stay unchanged', examples: 'Examples: "All people and expressions"' },
                    { name: 'styleConsistency', label: 'Style Consistency', type: 'text', hint: 'Maintain specific qualities', examples: 'Examples: "Match original exposure"' }
                ],
                template: "Using the provided image, {action} the {targetElement} with {newElement}. Ensure {integration} while preserving {preservation}. Maintain {styleConsistency} throughout the edit."
            },
            'style-transfer': {
                title: "üé® Artistic Style Transfer Template",
                description: "Transform photographs into artistic styles",
                fields: [
                    { name: 'artistStyle', label: 'Target Art Style', type: 'text', hint: 'Artist or art movement', examples: 'Examples: "Van Gogh\'s Starry Night style"' },
                    { name: 'techniques', label: 'Artistic Techniques', type: 'textarea', hint: 'Visual techniques', examples: 'Examples: "Visible swirling brushstrokes"' },
                    { name: 'colorApproach', label: 'Color Treatment', type: 'text', hint: 'Color transformation', examples: 'Examples: "Vibrant complementary colors"' },
                    { name: 'preservation', label: 'Elements to Preserve', type: 'text', hint: 'What stays recognizable', examples: 'Examples: "Original composition"' },
                    { name: 'intensity', label: 'Transformation Intensity', type: 'select', options: ['subtle artistic influence', 'moderate style transformation', 'strong artistic interpretation', 'complete style conversion'], hint: 'How dramatic' },
                    { name: 'mediaType', label: 'Artistic Medium', type: 'select', options: ['oil painting', 'watercolor', 'digital art', 'pencil drawing', 'charcoal sketch', 'pastel drawing', 'acrylic painting'], hint: 'Medium to emulate' }
                ],
                template: "Transform the provided photograph into {artistStyle}, incorporating {techniques} and {colorApproach} color treatment. Apply {intensity} while preserving {preservation}. Render as {mediaType} artwork."
            }
        };

        function updateProgress(step) {
            currentStep = step;
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = ((step - 1) / 2) * 100 + '%';
            for (let i = 1; i <= 3; i++) {
                const stepEl = document.getElementById('step' + i);
                stepEl.classList.remove('active', 'completed');
                if (i < step) stepEl.classList.add('completed');
                else if (i === step) stepEl.classList.add('active');
            }
        }

        function selectCategory(category) {
            selectedCategory = category;
            updateProgress(2);
            document.querySelector('.page.active').classList.remove('active');
            document.getElementById(category === 'text-to-image' ? 'page2a' : 'page2b').classList.add('active');
        }

        function selectTemplate(template) {
            selectedTemplate = template;
            updateProgress(3);
            document.querySelector('.page.active').classList.remove('active');
            loadTemplateForm(template);
            document.getElementById('page3').classList.add('active');
        }

        function loadTemplateForm(templateKey) {
            const template = templates[templateKey];
            let html = `<h2 class="page-title">${template.title}</h2>
                <p class="page-subtitle">${template.description}</p>
                <div class="template-form"><div class="form-section"><h3>‚öôÔ∏è Template Configuration</h3>`;
            
            template.fields.forEach(field => {
                html += `<div class="field-group"><label class="field-label">${field.label}:</label>`;
                if (field.hint) html += `<div class="field-hint">${field.hint}</div>`;
                if (field.examples) html += `<div class="field-examples">${field.examples}</div>`;
                
                if (field.type === 'textarea') {
                    html += `<textarea id="${field.name}" placeholder="${field.hint || ''}" oninput="updateLivePreview()"></textarea>`;
                } else if (field.type === 'select') {
                    html += `<select id="${field.name}" onchange="updateLivePreview()"><option value="">Choose...</option>`;
                    field.options.forEach(opt => html += `<option value="${opt}">${opt}</option>`);
                    html += `</select>`;
                } else {
                    html += `<input type="text" id="${field.name}" placeholder="${field.hint || ''}" ${field.maxLength ? 'maxlength="'+field.maxLength+'"' : ''} oninput="updateLivePreview()">`;
                }
                html += `</div>`;
            });
            
            html += `
                <div class="form-section"><h3>üéØ Generated Prompt</h3>
                <div class="live-preview" id="livePrompt">
                    <div class="prompt-stats" id="promptStats">0 characters</div>
                    Fill in the fields above to generate your optimized  prompt...
                </div></div>
                <div class="button-container">
                    <button class="btn btn-primary" onclick="copyPrompt()">üìã Copy Prompt</button>
                    <button class="btn btn-secondary" onclick="copyForLLM()">ü§ñ Optimize with ChatGPT</button>
                    <button class="btn btn-secondary" onclick="downloadPrompt()">üíæ Download</button>
                    <button class="btn btn-secondary" onclick="resetForm()">üîÑ Start Over</button>
                </div>
                <div class="platform-link-container">
                    <h3>üöÄ Ready to Generate with Nano Banana?</h3>
                    <p>Take your optimized prompt to Google GEMINI </p>
                    <a href="https:/https://gemini.google.com/" target="_blank" class="action-button platform">
                        Launch Google Gemini ‚Üí
                    </a>
                </div></div>`;
            
            document.getElementById('templateContent').innerHTML = html;
            updateLivePreview();
        }

        function updateLivePreview() {
            const template = templates[selectedTemplate];
            if (!template) return;
            let prompt = template.template;
            template.fields.forEach(field => {
                const el = document.getElementById(field.name);
                const val = el ? el.value.trim() : '';
                prompt = prompt.replace(new RegExp(`{${field.name}}`, 'g'), val || `[${field.label}]`);
            });
            if (selectedCategory === 'text-to-image') {
                const num = document.getElementById('numberOfImages')?.value || '4';
                const person = document.getElementById('personGeneration')?.value || 'allow_adult';
            }
            // Remove unwanted lines from live preview
            prompt = prompt.replace(/# Configuration\n?/g, '').replace(/‚Ä¢ Generate 4 images\n?/g, '').replace(/‚Ä¢ Person generation: allow_adult\n?/g, '');
            document.getElementById('livePrompt').textContent = prompt;
            const stats = document.getElementById('promptStats');
            if (stats) stats.textContent = `${prompt.length} characters`;
        }

        function copyPrompt() {
            const text = document.getElementById('livePrompt').textContent;
            if (text.includes('[')) { alert("Please fill in all required fields first!"); return; }
            const btn = event.target;
            const orig = btn.innerHTML;
            navigator.clipboard.writeText(text).then(() => {
                btn.innerHTML = '‚úÖ Copied!';
                setTimeout(() => btn.innerHTML = orig, 2000);
            }).catch(() => {
                const ta = document.createElement('textarea');
                ta.value = text;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
                btn.innerHTML = '‚úÖ Copied!';
                setTimeout(() => btn.innerHTML = orig, 2000);
            });
        }

        function copyForLLM() {
            const text = document.getElementById('livePrompt').textContent;
            if (text.includes('[')) { alert("Please fill in all required fields first!"); return; }
            const llm = `Optimize this Nano-Banana prompt for maximum image quality and visual impact:\n\n${text}\n\nPlease enhance this prompt by ensuring proper formatting and structure for Google's model, enhancing detail clarity and visual specificity that would improve Nano-Banana's output quality and ensuring the prompt follows their best practices\n\nReturn only the improved Nano-banana prompt, ready to use.`;
            const btn = event.target;
            const orig = btn.innerHTML;
            navigator.clipboard.writeText(llm).then(() => {
                btn.innerHTML = '‚úÖ Copied! Opening ChatGPT...';
                btn.disabled = true;
                setTimeout(() => {
                    window.open('https://chatgpt.com/', '_blank');
                    setTimeout(() => { btn.innerHTML = orig; btn.disabled = false; }, 3000);
                }, 500);
            }).catch(() => {
                const ta = document.createElement('textarea');
                ta.value = llm;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
                btn.innerHTML = '‚úÖ Copied! Opening ChatGPT...';
                window.open('https://chatgpt.com/', '_blank');
                setTimeout(() => btn.innerHTML = orig, 3000);
            });
        }

        function downloadPrompt() {
            const template = templates[selectedTemplate];
            const text = document.getElementById('livePrompt').textContent;
            // Remove unwanted lines from downloaded prompt
            const cleanText = text.replace(/# Configuration\n?/g, '').replace(/‚Ä¢ Generate 4 images\n?/g, '').replace(/‚Ä¢ Person generation: allow_adult\n?/g, '');
            const content = `NANO BANANA - Nano-Banana PROMPT GENERATOR\n${'='.repeat(39)}\nTemplate: ${template.title}\nGenerated: ${new Date().toLocaleString()}\nCategory: ${selectedCategory}\n\nGENERATED PROMPT:\n${cleanText}\n\nUSAGE INSTRUCTIONS:\n‚Ä¢ Optimized for Google's Nano\n‚Ä¢ Use with Nano-Banana API or Google AI Studio\n‚Ä¢ Supports aspect ratios: 1:1, 4:3, 3:4, 16:9, 9:16`;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `NanoBanana_${selectedTemplate}_${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function resetForm() {
            if (confirm("Start over? All progress will be lost.")) location.reload();
        }

        function goBack() {
            updateProgress(1);
            document.querySelector('.page.active').classList.remove('active');
            document.getElementById('page1').classList.add('active');
            selectedCategory = '';
        }

        function goBackToTemplates() {
            updateProgress(2);
            document.querySelector('.page.active').classList.remove('active');
            document.getElementById(selectedCategory === 'text-to-image' ? 'page2a' : 'page2b').classList.add('active');
            selectedTemplate = '';
        }

        updateProgress(1);
    </script>
</body>
</html>